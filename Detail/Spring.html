<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Spring</title>


<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}

kbd {
  display: inline-block;
  padding: 3px 5px;
  font-size: 11px;
  line-height: 10px;
  color: #555;
  vertical-align: middle;
  background-color: #fcfcfc;
  border: solid 1px #ccc;
  border-bottom-color: #bbb;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #bbb
}

* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>


</head>

<body>

<h1 id="toc_0">Spring笔记：</h1>

<p><strong>一句话概括：通过DI,AOP,样板式代码来简化java开发。</strong></p>

<h2 id="toc_1">DI</h2>

<h3 id="toc_2">DI原理：</h3>

<p>通过应用上下文(Application Context)把Bean装载和组装起来                                                  </p>

<h3 id="toc_3">DI方式：</h3>

<p>1.构造器注入（constructor injection）；
2.seter方法注入；</p>

<h3 id="toc_4">DI目的：（解决组件之间的耦合）</h3>

<p>1.松耦合；</p>

<h3 id="toc_5">装配(wiring)：</h3>

<h3 id="toc_6">装配方式：</h3>

<p>1.xml；
2.注解</p>

<h2 id="toc_7">AOP</h2>

<h3 id="toc_8">AOP目的：（解决任务之间的耦合）</h3>

<p>1.关注点的分离，实现可重用（例如：日志，事务，安全etc）,这类组件称为横切关注点，通常跨越系统多个组件；
2.使用声明的方式应用到服务，而不是常规的调用，使得业务与业务核心逻辑分离；</p>

<h3 id="toc_9">AOP语法：</h3>

<p>AspectJ</p>

<h2 id="toc_10">Spring容器</h2>

<h3 id="toc_11">作用：</h3>

<p>1.负责创建，装配，配置，并且管理生命周期（new ----&gt; finalize）</p>

<h3 id="toc_12">容器类型：</h3>

<p>1.Bean工厂：BeanFactory类；（一般不使用）
2.应用上下文：ApplicationContext类；</p>

<h3 id="toc_13">容器中Bean的生命周期</h3>

<p>（待补充）</p>

<h3 id="toc_14">Spring 模块</h3>

<h3 id="toc_15">数据库类型</h3>

<p>1.传统关系型数据库
2.Nosql数据库，例如：mongoDB,Neo4J</p>

<h2 id="toc_16">装配Bean</h2>

<h4 id="toc_17">装配（wiring）：创建对象之间的关系,是DI的本质</h4>

<h4 id="toc_18">装配方式：</h4>

<h6 id="toc_19">1.XML显示方式；</h6>

<h6 id="toc_20">2.Java Config显示方式；(多用于使用第三方类的时候装配)</h6>

<h6 id="toc_21">3.组件扫描（Component Scanning） 和 自动装配(autoWiring)  推荐方式；</h6>

<h5 id="toc_22"><em>tips: @Configeration注解 ：表示使用JavaConfig配置的方式进行装配</em></h5>

<h4 id="toc_23">高级装配：</h4>

<h5 id="toc_24">profiles：用于不同环境指定不同的Bean装配;</h5>

<h6 id="toc_25">#设置值：spring.profiles.active;spring.profiles.default;</h6>

<h6 id="toc_26">#设置方法：(有多个则使用逗号隔开)</h6>

<blockquote>
<p>dispatcherservlet初始化参数；</p>

<p>web应用上下文参数</p>

<p>JNDI条目</p>

<p>环境变量</p>

<p>JVM系统参数</p>

<p>测试类上使用@ActiveProfiles</p>
</blockquote>

<h5 id="toc_27">条件化Bean : @Conditional注解</h5>

<h5 id="toc_28">歧义处理方法：</h5>

<blockquote>
<p>定义首选项（primary）</p>

<p>限定符（qolifier）（<em>更强大</em>）:每个Bean默认以类名为限定符，如果自定义，建议使用特征性或者描述性的术语，不建议直接名称；任然有冲突时可使用多个限定符；但是Java不支持同时使用多个相同的注解，解决办法是定义自定义的注解；</p>
</blockquote>

<h5 id="toc_29">作用域：使用@Scope指定，<em>tips:其属性proxyMode用于解决不同域的依赖注入</em></h5>

<ul>
<li>sigleton(默认)</li>
<li>Prototype</li>
<li>Session</li>
<li>Request</li>
</ul>

<h5 id="toc_30">运行时值注入：注入方式:</h5>

<ul>
<li><p>属性占位符（Property placeholder）:
使用方法：@Value注解 + ${}； 原理：属性加载到环境变量，再获取；依赖：需要placeholder:可通过<a href="context:property-placeholder">context:property-placeholder</a>创建；</p></li>
<li><p>Spring表达式语言（SPEL）：
使用方法：#{} 语法：<em>待补充</em></p></li>
</ul>

<h2 id="toc_31">Spring AOP</h2>

<p><em>待定</em></p>

<h2 id="toc_32">Spring Web</h2>

<h4 id="toc_33">跳转逻辑：</h4>

<p>模型的key会根据返回值的类型得出（例：返回List<User>  ----&gt; 模型名为userList ）
逻辑视图名称可以指定，默认跟请求路径名相同</p>

<h4 id="toc_34">入参值校验：</h4>

<p>加属性注解：例如：@NotNull;
入参Bean加注解：@Valid;</p>

<h2 id="toc_35">Spring视图</h2>

<h4 id="toc_36">视图解析器可选方案：例如：jsp,tiles,thymeleaf;</h4>

<h2 id="toc_37">Spring高级技术</h2>

<h4 id="toc_38">文件上传；</h4>

<h4 id="toc_39">异常处理：</h4>

<ul>
<li>控制器级别异常处理：@ExceptionHandler(作用范围：整个控制器)</li>
<li>全局级别异常处理：@ControllerAdvice 即通知(作用范围：所有带有@RequestMapping的控制器)</li>
</ul>

<h4 id="toc_40">重定向值传递：</h4>

<ul>
<li>String类型传递；（局限：不安全，可能携带SQL）</li>
<li>路径变量或者查询参数；（局限：只能传递原始数据类型，不能传递对象类型）</li>
<li>放到session中；(局限：需要手动删除)</li>
<li>flash属性：RedirectAttributes类addFlashAttributes()方法；（原理：先放到回话，再从会话中读取）</li>
</ul>

<h2 id="toc_41">Spring Web Flow</h2>

<h4 id="toc_42">流程注册：<a href="flow:flow-registry">flow:flow-registry</a></h4>

<h2 id="toc_43">Spring Security</h2>

<h4 id="toc_44">原理：基于Spring AOP 和 Servlet filter实现；</h4>

<h4 id="toc_45">配置方式：@EnableWebMvcSecurity 并且实现WebSecurityConfigurerAdapter</h4>

<h2 id="toc_46">Spring 数据库连接：</h2>

<h4 id="toc_47">数据源连接方式：</h4>

<ul>
<li>JNDI</li>
<li>连接池</li>
<li>JDBC</li>
<li>测试数据配置：嵌入式数据源：<a href="jdbc:embeded-dataSource">jdbc:embeded-dataSource</a>
数据源选择：Profile;</li>
</ul>

<h2 id="toc_48">Spring 对象-关系映射持久化数据（ORM）</h2>

<h2 id="toc_49">Spring 使用NoSQL数据库</h2>

<ol>
<li>Mongo DB;</li>
<li>Neo4J；</li>
<li>Redis(6379端口);</li>
</ol>

<h2 id="toc_50">Spring cache</h2>

<ul>
<li>ehcache</li>
<li>Redis
##Spring Security</li>
<li>@Secured</li>
<li>@RolesAllowed</li>
<li>表达式注解:@PreAuthorise,@PostAuthorise,@PreFilter,@PostFilter;</li>
</ul>

<h2 id="toc_51">Spring 使用远程服务</h2>

<p>使用服务导出器：</p>

<ul>
<li>RMI(协议：JRMP；消息格式：二级制；端口：默认1099 ；导出类：RmiServieExporter)<br>
缺点：1.可使用任意端口，难穿越防火墙，内部网络没限制；2，RMI基于Java，限制客户端和服务端都使用Java；优点：使用Java标准的对象序列化机制，可支持复杂的数据模型；</li>
<li>Hessian(协议：HTTP;消息格式：二进制;优点：可非Java平台，有带宽优势；缺点：私有的对象序列化机制，不支持复杂的数据模型) </li>
<li>Burlab(协议：HTTP;消息格式：xml;优点：可非Java平台，有可读性优势；缺点：私有的对象序列化机制，不支持复杂的数据模型）</li>
<li>Spring HttpInvoker（综合前两者的优势）</li>
<li>JAX-WS(协议：soap)</li>
</ul>

<h2 id="toc_52">Spring MVC创建Rest API</h2>

<p>区分：
SOA:关注行为和动作
REST:关注资源数据</p>

<h4 id="toc_53">rest概念：</h4>

<ul>
<li><p>1.资源协商描述ContentNegotiatingViewResolver:（有缺陷，不建议使用）
工作原理：
<strong>1.决定请求媒体类型（默认）：</strong>a,先查看请求URL扩展名；b,再查看请求头ContentType;c,以/作为请求类型，表示客户端接受任何类型的媒体类型；
<strong>2.决定请求媒体类型（配置）:通过装配ContentNegotiatingManager来指定</strong></p></li>
<li><p>http信息转换器：（只需要类路径下有相关的转换器包即可，不需要额外的配置，例如Json:MappingJackson2HttpMessageConverter类）
注解：@RequestMapping---&gt;produces/consume属性(指定接受类型)；@ResponseBody（指定响应类型）；@RequestController指定全局数据格式（作用域为单个Controller）; @ResponseStatus指定状态；使用ResponseEntity来封装更多响应内容；使用@ExceptioHandler来捕获详细信息；</p></li>
</ul>

<h4 id="toc_54">客户端：</h4>

<h6 id="toc_55">两种请求方式：</h6>

<ul>
<li>Apache HttpClient</li>
<li>Rest Template</li>
</ul>

<h2 id="toc_56">Spring 消息</h2>

<p>消息的两种目的地：点对点模型（队列）&amp; 发布/订阅模型（主题）</p>

<h4 id="toc_57">消息发送/接收的两种方式：</h4>

<ol>
<li><p>JMS(java message serice)
1.模板JmsTemplate;（确缺点：发送异步，但是接收（receive方法）同步） 2.消息驱动pojo（配置消息监听器）; 3.基于消息的RPC（JmsInvokerServiceExporter用于导出；JmsInvokerProxyFactoryBean用于提供给客户端使用）；</p></li>
<li><p>AMQP：（优势：1.其线路层协议规范了消息格式，使得可以跨平台或者跨语言使用；2.具有更灵活和透明的消息模型（不局限于队列和订阅），通过Exchange指定）</p></li>
</ol>

<h2 id="toc_58">使用JMX管理 Spring Bean</h2>

<p>作用：</p>

<p>管理，监视，配置应用；</p>

<ul>
<li>JMX： （java manage extensions）管理暴露了特定方法的Bean；</li>
</ul>

<h2 id="toc_59">Spring Boot</h2>

<h3 id="toc_60">Spring Boot Stater</h3>

<ul>
<li>原理：将项目所需的所有依赖聚合成一项依赖（利用传递依赖）</li>
</ul>

<h3 id="toc_61">自动配置</h3>

<ul>
<li>原理：通过扫描类路径自动配置相关的Bean
### 命令行接口（CLI）</li>
<li>使用：（结合groovy使用）
### Actuator</li>
<li>特性：（管理端点）</li>
</ul>




</body>

</html>
